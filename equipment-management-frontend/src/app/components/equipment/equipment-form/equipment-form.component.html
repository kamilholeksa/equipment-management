<div class="form-container">
  <form [formGroup]="equipmentForm" (ngSubmit)="onSubmit()">
    <h5 class="text-center">{{ isEditMode ? 'Edytuj sprzęt' : 'Dodaj sprzęt' }}</h5>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Producent</mat-label>
      <input matInput formControlName="manufacturer" required />
      <mat-error *ngIf="equipmentForm.controls['manufacturer'].hasError('required')">Pole wymagane</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Model</mat-label>
      <input matInput formControlName="model" required />
      <mat-error *ngIf="equipmentForm.controls['model'].hasError('required')">Pole wymagane</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Opis</mat-label>
      <textarea matInput formControlName="description"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Numer inwentarzowy</mat-label>
      <input matInput formControlName="inventoryNumber" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Numer seryjny</mat-label>
      <input matInput formControlName="serialNumber" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Typ</mat-label>
      <mat-select formControlName="typeId" required>
        <mat-option *ngFor="let type of equipmentTypeList" [value]="type.id">
          {{ type.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Adres</mat-label>
      <mat-select formControlName="addressId">
        <mat-option *ngFor="let address of addressList" [value]="address.id">
          {{ address.description + ' (' + address.street + ' ' + address.number + ', ' + address.postalCode + ' ' + address.city + ')' }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Lokalizacja</mat-label>
      <input matInput formControlName="location" />
    </mat-form-field>

    <mat-form-field *ngIf="this.isEditMode" appearance="outline" class="form-field">
      <mat-label>Status</mat-label>
      <mat-select formControlName="status" required>
        <mat-option *ngFor="let status of statuses" [value]="status">
          {{ status | equipmentStatusDisplay }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Data zakupu</mat-label>
      <input matInput [matDatepicker]="purchaseDatePicker" formControlName="purchaseDate" />
      <mat-datepicker-toggle matSuffix [for]="purchaseDatePicker"></mat-datepicker-toggle>
      <mat-datepicker #purchaseDatePicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Gwarancja do</mat-label>
      <input matInput [matDatepicker]="warrantyDatePicker" formControlName="warrantyUntil" />
      <mat-datepicker-toggle matSuffix [for]="warrantyDatePicker"></mat-datepicker-toggle>
      <mat-datepicker #warrantyDatePicker></mat-datepicker>
    </mat-form-field>

    <button mat-flat-button type="submit" class="w-100" [disabled]="equipmentForm.invalid">
      <i class="bi bi-floppy-fill"></i>
      Zapisz
    </button>


  </form>
  <button mat-stroked-button (click)="goBack()">
    <i class="bi bi-arrow-left"></i>
    Wróć
  </button>
</div>
